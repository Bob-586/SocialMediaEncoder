function postAjax(e,b,c){var d="string"==typeof b?b:Object.keys(b).map(function(a){return encodeURIComponent(a)+"="+encodeURIComponent(b[a])}).join("&"),a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");a.open("POST",e);a.onreadystatechange=function(){3<a.readyState&&200==a.status&&c(a.responseText)};a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.setRequestHeader("Content-Type","application/x-www-form-urlencoded");a.send(d);return a}
function sleep(e){return new Promise(b=>setTimeout(b,e))}
function post(){if(40>document.getElementById("enc").value.length)throw document.getElementById("msg").innerHTML="Please write more...","not written enough text";document.getElementById("post").disabled=!0;document.getElementById("msg").innerHTML="Posting....";sleep(2500).then(()=>{var e=document.getElementById("enc").value,b=document.getElementById("pwd").value,c=0<b.length;try{var d=do_enc("xor","des",e,b);postAjax("do_post.php",{enc:d,pass:c},function(a){a=JSON.parse(a);if(a.hasOwnProperty("Failed"))document.getElementById("msg").innerHTML=
a.Failed;else if(a.hasOwnProperty("Success")&&a.hasOwnProperty("id")){var b=a.id,c=window.location.href.replace("post.php","").replace("index.php","");a=a.Success+". Your Link is: "+c+b;document.getElementById("msg").innerHTML=a;document.getElementById("post").disabled=!1;document.getElementById("enc").value=""}})}catch(a){"undefined"!=typeof a.message?(console.warn(a.message),alert(a.message)):(console.warn(a),alert(a)),document.getElementById("post").disabled=!1,document.getElementById("msg").innerHTML=
""}})}
function feed_fetch(e){postAjax("do_fetch.php",{id:e},function(b){document.getElementById("wait").innerHTML="";b=JSON.parse(b);if(b.hasOwnProperty("Failed")){var c=document.getElementById("feed_update_list"),d=document.createElement("li");d.innerHTML=b.Failed;c.appendChild(d)}else if(!1===b)c=document.getElementById("feed_update_list"),d=document.createElement("li"),d.innerHTML="No Message Found!",c.appendChild(d);else{c="";if(b.hasOwnProperty("has_pwd")&&"Y"===b.has_pwd){d=document.getElementById("password");var a=
document.getElementById("pwd");if("undefined"!=typeof d&&null!=d&&"none"===d.style.display)throw d.style.display="block","Needs password";"undefined"!=typeof a&&null!=a&&(c=a.value)}b.hasOwnProperty("cypher")?(b=do_dec(b.cypher,c).replace(/(?:\r\n|\r|\n)/g,"<br>"),c=document.getElementById("feed_update_list"),d=document.createElement("li"),d.innerHTML=b.trim(),c.appendChild(d),b=document.createElement("hr"),c.appendChild(b)):document.getElementById("wait").innerHTML="No Results Found"}})}
function feed_fetchs(){postAjax("do_fetchs.php",{},function(e){document.getElementById("wait").innerHTML="";e=JSON.parse(e);if(e.hasOwnProperty("Failed")){var b=document.getElementById("feed_update_list"),c=document.createElement("li");c.innerHTML=e.Failed;b.appendChild(c)}else if(!1===e)b=document.getElementById("feed_update_list"),c=document.createElement("li"),c.innerHTML="No Messages Found!",b.appendChild(c);else for(var d=0;d<e.length;d++)if(e[d].hasOwnProperty("cypher")){var a=do_dec(e[d].cypher,
"").replace(/(?:\r\n|\r|\n)/g,"<br>");b=document.getElementById("feed_update_list");c=document.createElement("li");c.innerHTML=a.trim();b.appendChild(c);c=document.createElement("hr");b.appendChild(c)}})};